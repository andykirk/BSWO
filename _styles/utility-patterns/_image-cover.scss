/*
    Fill and area with an image.
*/

$image-cover-namespace: u- !default;

.#{$image-cover-namespace} {
    margin-left: $sz-s !important;
}



/* Make the image fill the width and be vertically centered: */
/* (in portrait images this will leave gaps at the sides) */
/*.u-image-cover {
    width: 100%;
    top: 50%;
    transform: translateY(-50%);
}*/



/*
    ! NOTE: test this in all non-object-fit-supporting browsers as it may be a fix for those too.

    This only works for landscape containers. If it's portrait it breaks unless the width and
    // translate are inverted, and that can't be detected if size changes.
    Will be replying on JS to check for change to portrait and apply portrait class.
*/


.#{$image-cover-namespace}image-cover {

    &#{&} {
        position: relative;
        height: 100%;
        width: 100%;
        // Safari:
        flex: 1 0 auto;
    }

        /*
        &#{&}--min-10 {
           min-height: 10vmin;
        }

        &#{&}--min-20 {
            min-height: 20vmin;
        }

        &#{&}--min-30 {
            min-height: 30vmin;
        }

        &#{&}--min-40 {
            min-height: 40vmin;
        }

        &#{&}--min-50 {
            min-height: 50vmin;
        }
        */

    .#{$image-cover-namespace}image-cover__inner {
        display: block;
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }


        .#{$image-cover-namespace}image-cover__image {
            position: absolute;
            left: 50%;
            top: 50%;
            width: 100%;
            height: auto;
            transform: translate(-50%, -50%);
            max-width: none;
            max-height: none;
        }

}


/* If `object-fit` is supported, use that and override vertical centering: */
@supports (object-fit:cover) {
    .#{$image-cover-namespace}image-cover {

        .#{$image-cover-namespace}image-cover__inner {
            position: absolute;
            width: 100%;
            height: 100%;
        }

            .#{$image-cover-namespace}image-cover__image {
                position: relative;
                left: 0;
                top: 0;
                transform: none;

                object-fit: cover;
                height: 100%;
                width: 100%;
            }
    }
}

// Note this isn't great but it's easier to have this apply only at smaller sizes.
// May need to change it causes problems, but current concern is NIHR funding baby image.
@media (max-width: $f__breakpoint--enhanced) {
    .#{$image-cover-namespace}image-cover {
       
        &#{&}--min-10 {
           min-height: 10vmin;
        }

        &#{&}--min-20 {
            min-height: 20vmin;
        }

        &#{&}--min-30 {
            min-height: 30vmin;
        }

        &#{&}--min-40 {
            min-height: 40vmin;
        }

        &#{&}--min-50 {
            min-height: 50vmin;
        }
    }
}